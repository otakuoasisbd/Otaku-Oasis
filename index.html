<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Anime Haven Figures</title>
<style>
:root {
  --bg:#0a0a0f;
  --card-bg:rgba(25,25,35,0.7);
  --glass-border:rgba(255,255,255,0.1);
  --text:#fff;
  --muted:#aaa;
  --accent:#ff66cc;
  --accent-glow:0 0 10px rgba(255,102,204,0.6);
}

*{box-sizing:border-box;margin:0;padding:0;font-family:"Poppins",sans-serif;transition:all .3s ease;}
body{
  background:linear-gradient(135deg,#0a0a0f,#1a1a2f);
  color:var(--text);
  overflow-x:hidden;
  min-height:100vh;
}

/* Glassy navbar */
nav{
  backdrop-filter:blur(12px) saturate(180%);
  background:rgba(255,255,255,0.05);
  border-bottom:1px solid var(--glass-border);
  position:sticky;top:0;z-index:100;
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 20px;
}
nav h1{font-size:1.3rem;color:var(--accent);text-shadow:var(--accent-glow);}
nav input{
  background:rgba(255,255,255,0.1);
  border:none;
  border-radius:25px;
  padding:8px 15px;
  color:#fff;
  width:150px;
}
nav input:focus{outline:1px solid var(--accent);}
nav .cart-btn{
  background:var(--accent);
  color:#fff;border:none;border-radius:20px;
  padding:6px 14px;
  cursor:pointer;box-shadow:var(--accent-glow);
}
nav .cart-btn:hover{transform:scale(1.05);}

/* Progress bar */
#progress{
  position:fixed;top:0;left:0;height:3px;
  background:var(--accent);
  width:0%;
  z-index:999;
}

/* Product grid */
#products-grid,#pre-list{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:20px;
  padding:20px;
}

/* Product cards */
.product-card{
  background:var(--card-bg);
  border:1px solid var(--glass-border);
  border-radius:16px;
  overflow:hidden;
  box-shadow:0 0 10px rgba(0,0,0,0.4);
  cursor:pointer;
  backdrop-filter:blur(12px);
}
.product-card:hover{transform:translateY(-5px) scale(1.02);box-shadow:0 0 15px rgba(255,102,204,0.2);}
.product-card img{width:100%;height:200px;object-fit:cover;border-bottom:1px solid var(--glass-border);}
.p-title{font-weight:600;font-size:1rem;padding:8px 12px;}
.p-desc{font-size:0.85rem;color:var(--muted);padding:0 12px 8px 12px;}
.p-price{font-weight:700;color:var(--accent);padding:0 12px 8px 12px;}

/* Buttons */
.btn{
  border:none;
  border-radius:12px;
  padding:6px 12px;
  cursor:pointer;
  font-size:0.85rem;
}
.btn.primary{
  background:var(--accent);
  color:#fff;
  box-shadow:var(--accent-glow);
}
.btn.primary:hover{filter:brightness(1.2);}
.btn.ghost{
  background:rgba(255,255,255,0.1);
  color:#fff;
}
.btn.ghost:hover{background:rgba(255,255,255,0.2);}

/* Modal */
#modal{
  position:fixed;
  inset:0;
  display:flex;align-items:center;justify-content:center;
  background:rgba(0,0,0,0.6);
  backdrop-filter:blur(10px);
  opacity:0;
  pointer-events:none;
  transition:opacity .3s ease;
  z-index:9999;
}
#modal.open{opacity:1;pointer-events:auto;}
.modal-content{
  background:rgba(30,30,40,0.9);
  border-radius:20px;
  border:1px solid var(--glass-border);
  padding:20px;
  max-width:90%;
  width:420px;
  color:#fff;
  position:relative;
  box-shadow:0 0 20px rgba(255,102,204,0.2);
}
#modalImage{width:100%;border-radius:12px;object-fit:cover;}
#modalThumbs{display:flex;gap:8px;margin-top:10px;overflow-x:auto;}
#modalThumbs img{width:60px;height:60px;object-fit:cover;border-radius:8px;cursor:pointer;opacity:0.6;}
#modalThumbs img.active{opacity:1;box-shadow:0 0 8px var(--accent);}
#modalCloseBtn{
  position:absolute;top:10px;right:10px;
  background:none;border:none;color:#fff;font-size:1.4rem;cursor:pointer;
}
.modal-footer{display:flex;justify-content:space-between;align-items:center;margin-top:10px;}

/* Toast */
#toast{
  position:fixed;
  bottom:20px;left:50%;transform:translateX(-50%) translateY(100%);
  background:rgba(20,20,30,0.9);
  color:#fff;
  padding:10px 20px;
  border-radius:20px;
  box-shadow:var(--accent-glow);
  opacity:0;
  transition:all .4s ease;
  z-index:99999;
}
#toast.show{opacity:1;transform:translateX(-50%) translateY(0);}

/* Responsive tweaks */
@media (max-width:600px){
  nav h1{font-size:1rem;}
  #products-grid,#pre-list{grid-template-columns:repeat(auto-fill,minmax(160px,1fr));}
  .modal-content{width:90%;}
}
</style>
</head>
<body>
<div id="progress"></div>

<nav>
  <h1>ðŸŒ¸ Anime Haven</h1>
  <input id="searchBox" placeholder="Search...">
  <button class="cart-btn" id="checkoutBtn">Checkout</button>
</nav>

<section id="products-grid"></section>
<h2 style="padding:0 20px;color:var(--accent);margin-top:10px;">Pre-Orders</h2>
<section id="pre-list"></section>

<!-- Modal -->
<div id="modal" aria-hidden="true">
  <div class="modal-content">
    <button id="modalCloseBtn">âœ–</button>
    <img id="modalImage" src="" alt="">
    <div id="modalThumbs"></div>
    <h3 id="modalTitle" style="margin-top:10px;"></h3>
    <p id="modalDesc" style="white-space:pre-line;margin:8px 0;"></p>
    <div class="modal-footer">
      <span id="modalPrice"></span>
      <button id="modalAddBtn" class="btn primary">Add to Cart</button>
    </div>
  </div>
</div>

<!-- Toast -->
<div id="toast"></div>

<script>
const products = [
  {id:'akaza1', name:'Akaza', priceText:'700tk', price:700, imgs:['assets/akaza1.JPEG','assets/akaza2.JPEG','assets/akaza3.JPEG'], desc:'Akaza figure Size:28cm from Demon Slayer.', category:'Demon Slayer'},
  {id:'marin', name:'Marin Kitagawa', priceText:'800tk', price:800, imgs:['assets/marin1.JPEG','assets/marin2.JPEG','assets/marin3.JPEG'], desc:'Limited edition Marin figure from My Dressup Darling with box.', category:'Other'},
  {id:'tanjiro', name:'Tanjiro', priceText:'800tk', price:800, imgs:['assets/tanjiro1.JPG','assets/tanjiro2.JPG','assets/tanjiro3.JPG'], desc:'Tanjiro Kamado Size:28cm from Demon Slayer.', category:'Demon Slayer'},
  {id:'makima', name:'Bunny Makima', priceText:'2000tk', price:2000, imgs:['assets/makima1.jpeg','assets/makima2.jpeg','assets/makima3.jpeg'], desc:'Original Furyu Makima figure Size:28cm from Chainsawman with box.', category:'Chainsawman'},
  {id:'rem', name:'Rem', priceText:'600tk', price:600, imgs:['assets/rem1.jpg','assets/rem2.JPEG','assets/rem3.jpg'], desc:'Rem figure Size:28cm from Re:Zero.', category:'Other'},
  {id:'tohka', name:'Tohka Yatogami', priceText:'800tk', price:800, imgs:['assets/tohka1.jpg','assets/tohka2.jpg','assets/tohka3.jpg'], desc:'Tohka Yatogami figure Size:28cm from Date a Live Girl.', category:'Other'},
  {id:'chibi1', name:'Chibi Zenitsu', priceText:'500tk', price:500, imgs:['assets/zenitsu.small.jpg'], desc:'Chibi cute Zenitsu figure Size:8cm from Demon Slayer.', category:'Demon Slayer'},
  {id:'chibi2', name:'Chibi Nezuko', priceText:'500tk', price:500, imgs:['assets/nezuko.small.jpg'], desc:'Chibi cute Nezuko figure Size:8cm from Demon Slayer.', category:'Demon Slayer'},
  {id:'zoro1', name:'Zoro Three Swords', priceText:'900tk', price:900, imgs:['assets/zoro1.jpeg','assets/zoro2.jpeg','assets/zoro3.jpeg'], desc:'Zoro Three Sword Figure Size:23.5cm from One Piece.', category:'One Piece'},
  {id:'pw1', name:'Pocket Watch OP', priceText:'900tk', price:900, imgs:['assets/opw.JPEG','assets/opw2.JPEG','assets/opw3.JPEG'], desc:'One Piece Pocket Watch from One Piece.', category:'One Piece'},
  {id:'mini1', name:'Mini Naruto Set', priceText:'300tk', price:300, imgs:['assets/n1.jpeg','assets/n2.jpeg','assets/n3.jpeg'], desc:'Cute mini figures (each) Size:8cm from Naruto.', category:'Naruto'},
  {id:'gojol', name:'Labubu Gojo', priceText:'800tk', price:800, imgs:['assets/lgojo1.JPG'], desc:'Cute Labubu Gojo from Jujutsu Kaisen.', category:'Jujutsu Kaisen'}
];

const preorders = [
  {id:'pre1', title:'Demon Slayer Chibi Set', eta:'2026-01', note:'Size:6cm. Reserve now, limited run.', imgs:['assets/kny1.JPG','assets/kny2.JPG']},
  {id:'pre2', title:'Jujutsu Kaisen Labubu Set', eta:'2025-12', note:'Bundle pre-order discount.', imgs:['assets/jjkl.JPG','assets/jjkl1.JPG','assets/jjkl2.JPG','assets/jjkl3.JPG','assets/jjkl4.JPG']},
  {id:'pre3', title:'Albedo Exquisite', eta:'2026-02', note:'Size:Xcm. Limited edition.', imgs:['assets/kny.JPG']},
  {id:'pre4', title:'Gojo Satoru', eta:'2026-03', note:'Size:X.', imgs:['assets/kny.JPG']}
];

const MESSENGER_URL='https://www.facebook.com/messages/t/737804756085179';
const $=s=>document.querySelector(s);

// progress
document.addEventListener('scroll',()=>{
  const s=document.documentElement;
  const percent=(s.scrollTop)/(s.scrollHeight-s.clientHeight)*100||0;
  $('#progress').style.width=percent+'%';
},{passive:true});

// render products
const grid=$('#products-grid');
function renderProducts(list){
  grid.innerHTML='';
  list.forEach(p=>{
    const el=document.createElement('article');
    el.className='product-card';
    el.innerHTML=`
      <img src="${p.imgs[0]}" alt="${p.name}">
      <div class="p-title">${p.name}</div>
      <div class="p-desc">${p.desc}</div>
      <div class="p-price">${p.priceText}</div>
      <div style="display:flex;gap:6px;padding:0 12px 12px;">
        <button class="btn ghost" data-act="details">Details</button>
        <button class="btn primary" data-act="add">Add</button>
      </div>`;
    el.querySelector('[data-act="details"]').onclick=(e)=>{e.stopPropagation();showDetails(p);};
    el.querySelector('[data-act="add"]').onclick=(e)=>{e.stopPropagation();addToCart(p);showToast(`${p.name} added!`);};
    el.onclick=()=>showDetails(p);
    grid.appendChild(el);
  });
}

// render preorders with modal
const preList=$('#pre-list');
function renderPreorders(){
  preList.innerHTML='';
  preorders.forEach(p=>{
    const el=document.createElement('article');
    el.className='product-card';
    el.innerHTML=`
      <img src="${p.imgs[0]}" alt="${p.title}">
      <div class="p-title">${p.title}</div>
      <div class="p-desc">ETA: ${p.eta}<br>${p.note}</div>
      <div style="display:flex;gap:6px;padding:0 12px 12px;">
        <button class="btn ghost" data-act="details">Details</button>
        <button class="btn primary" data-act="preorder">Pre-order</button>
      </div>`;
    el.querySelector('[data-act="details"]').onclick=(e)=>{e.stopPropagation();showPreorderDetails(p);};
    el.querySelector('[data-act="preorder"]').onclick=(e)=>{e.stopPropagation();redirectToMessenger(`I want to pre-order: ${p.title} (ETA: ${p.eta})`);};
    el.onclick=()=>showPreorderDetails(p);
    preList.appendChild(el);
  });
}

// modal functions
const modal=$('#modal');
const modalImage=$('#modalImage');
const modalThumbs=$('#modalThumbs');
const modalTitle=$('#modalTitle');
const modalDesc=$('#modalDesc');
const modalPrice=$('#modalPrice');
const modalAddBtn=$('#modalAddBtn');
let currentProd=null;

function showDetails(prod){
  currentProd=prod;
  modalTitle.textContent=prod.name;
  modalDesc.textContent=prod.desc;
  modalPrice.textContent=prod.priceText;
  loadModalImages(prod.imgs);
  modalAddBtn.style.display='inline-flex';
  openModal();
}
function showPreorderDetails(pre){
  currentProd=null;
  modalTitle.textContent=pre.title;
  modalDesc.textContent=`ETA: ${pre.eta}\n${pre.note}`;
  modalPrice.textContent='Pre-order only';
  loadModalImages(pre.imgs);
  modalAddBtn.style.display='none';
  openModal();
}
function loadModalImages(imgs){
  modalThumbs.innerHTML='';
  modalImage.src=imgs[0];
  imgs.forEach((src,i)=>{
    const t=document.createElement('img');
    t.src=src;
    if(i===0)t.classList.add('active');
    t.onclick=()=>{
      modalImage.src=src;
      modalThumbs.querySelectorAll('img').forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
    };
    modalThumbs.appendChild(t);
  });
}
function openModal(){modal.classList.add('open');modal.setAttribute('aria-hidden','false');}
function closeModal(){modal.classList.remove('open');modal.setAttribute('aria-hidden','true');}
$('#modalCloseBtn').onclick=closeModal;
modal.addEventListener('click',e=>{if(e.target===modal)closeModal();});
modalAddBtn.onclick=()=>{if(currentProd){addToCart(currentProd);showToast(`${currentProd.name} added!`);}};

// cart, messenger, search
let cart=[];
function addToCart(p){cart.push(p);}
function redirectToMessenger(msg){
  const url=`${MESSENGER_URL}?text=${encodeURIComponent(msg)}`;
  window.open(url,'_blank');
}
$('#checkoutBtn').onclick=()=>{
  if(!cart.length)return showToast('Cart empty!');
  const text='Hello! I want to order:\n'+cart.map(x=>`- ${x.name} (${x.priceText})`).join('\n');
  redirectToMessenger(text);
};
$('#searchBox').oninput=(e)=>{
  const val=e.target.value.toLowerCase();
  const filtered=products.filter(p=>p.name.toLowerCase().includes(val));
  renderProducts(filtered);
};

// toast
function showToast(msg){
  const t=$('#toast');
  t.textContent=msg;
  t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),2000);
}

// init
renderProducts(products);
renderPreorders();
</script>
</body>
</html>
